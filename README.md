# WebTest
WebアプリのUIテスト自動化ツール

## Feature
- テキスト（CSV）によるテストシナリオ実行・管理
- Seleniumによるテスト実行（マルチブラウザ対応）
- Javaによる拡張可能　※準備中
- GUIによるテストシナリオ編集　※準備中

## Usage
### Install
1. クローン

```
git clone https://github.com/mzk-wt/WebTest.git
```
2. Gradleプロジェクトとしてインポート

### Execution
1. シナリオ作成  
下記、Referenceの項を参照。
2. webtest.WebTest.javaを実行  
【コマンドラインパラメータ】  
　[0]ブラウザ種別（"chrome", "edge", "firefox"）  
　[1]出力フォルダのパス（フルパス）  
　[2]テストシナリオのパス（フルパス）  

## Sample
テストコード参照

## Reference
### Scenario
#### Format
テストシナリオは以下のフォーマットでCSVファイルを用意する。
```
<アクションコード>,<パラメータ１>,<パラメータ2>,<パラメータ3>,<パラメータ4>,<パラメータ5>
```

#### Scenario variable
各アクション間のデータのやり取りはシナリオ変数を介して行う。  
シナリオ変数に格納した値は```{{<変数名>}}```で呼び出すことができる。
```
GETTEXT,TEXT,id1,ID   // <- id="id1"のElementのテキストの値をシナリオ変数TEXTに格納
LOG,{{TEXT}}          // <- シナリオ変数TEXTに格納された値をログ出力
```

以下のシナリオ変数が予め用意されている。上書き可能。
|変数名|内容|初期値|
|:---|:---|:---|

#### Actions
ページ遷移／ブラウザ操作系アクション
|アクションコード|内容|パラメータ1|パラメータ2|パラメータ3|パラメータ4|パラメータ5|
|:---|:---|:---|:---|:---|:---|:---|
|OPEN|ページを表示する||||||
|NAVIGATE|ページを遷移する||||||
|BACK|１つ戻る||||||
|FORWARD|１つ進む||||||
|WAIT|ページがロードされるまで待機する||||||
|GETWINHANDLE|ウィンドウハンドルを取得する||||||
|WINSWITCH|ウィンドウを切り替える||||||
|CLOSE|ウィンドウを閉じる||||||
|WINSIZE|ウィンドウサイズを変更する||||||
|SCROLL|ページをスクロールする||||||

取得系アクション
|アクションコード|内容|パラメータ1|パラメータ2|パラメータ3|パラメータ4|パラメータ5|
|:---|:---|:---|:---|:---|:---|:---|
|GETURL|現在のURLを取得する||||||
|GETTITLE|タイトルを取得する||||||
|GETTEXT|テキストを取得する||||||
|GETATTR|属性を取得する||||||
|SAVECAPTURE|スクリーンショットをファイルに保存する||||||

入力系アクション
|アクションコード|内容|パラメータ1|パラメータ2|パラメータ3|パラメータ4|パラメータ5|
|:---|:---|:---|:---|:---|:---|:---|
|SENDKEY|キーボードから入力する||||||
|SELECT|ドロップダウン項目を選択する||||||
|CLICK|クリックする||||||
|EXECSCRIPT|スクリプトを実行する||||||

シナリオ制御系アクション
|アクションコード|内容|パラメータ1|パラメータ2|パラメータ3|パラメータ4|パラメータ5|
|:---|:---|:---|:---|:---|:---|:---|
|FOR|繰り返し処理開始（指定回数）||||||
|FORELEM|繰り返し処理開始（指定要素）||||||
|ENDFOR|繰り返し処理終了||||||

その他のアクション
|アクションコード|内容|パラメータ1|パラメータ2|パラメータ3|パラメータ4|パラメータ5|
|:---|:---|:---|:---|:---|:---|:---|
|NONE|なにもしない（コメント用）||||||
|SETVAL|シナリオ変数に値をセットする||||||
|LOG|ログを出力する||||||
